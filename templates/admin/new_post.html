{{ block "content" . }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.6.0/dist/full.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center py-10">

    <main class="w-full max-w-3xl bg-white rounded-lg shadow-lg p-8">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800">Create New Post</h1>
        </header>

        <form action="/admin/posts" method="POST" enctype="multipart/form-data" class="space-y-6">
            <!-- Title -->
            <div class="form-control w-full">
                <label class="label" for="title">
                    <span class="label-text font-semibold">Title</span>
                </label>
                <input type="text" id="title" name="title" required class="input input-bordered w-full">
            </div>

            <!-- Content -->
            <div class="form-control w-full">
                <label class="label" for="content">
                    <span class="label-text font-semibold">Content</span>
                </label>
                <textarea id="content" name="content" rows="12" class="textarea textarea-bordered w-full"></textarea>
            </div>

            <!-- Tags Multi-Select -->
            <div class="form-control w-full">
                <label class="label" for="tags">
                    <span class="label-text font-semibold">Tags</span>
                </label>
                <div class="dropdown w-full">
                    <input type="text" placeholder="Select tags..." id="tagInput" class="input input-bordered w-full cursor-pointer" readonly onclick="toggleDropdown()">
                    <ul id="tagDropdown" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-full hidden max-h-48 overflow-y-auto">
                        {{ range .AllTags }}
                        <li>
                            <label class="cursor-pointer flex items-center gap-2">
                                <input type="checkbox" name="tags" value="{{ .Name }}" class="checkbox checkbox-primary">
                                {{ .Name }}
                            </label>
                        </li>
                        {{ end }}
                    </ul>
                </div>
                <small class="text-gray-500 mt-1 block">Select multiple tags</small>
            </div>

            <!-- Image -->
            <div class="form-control w-full">
                <label class="label" for="image">
                    <span class="label-text font-semibold">Image</span>
                </label>
                <input type="file" id="image" name="image" class="file-input file-input-bordered w-full">
            </div>

            <!-- Actions -->
            <div class="flex justify-end gap-3">
                <a href="/admin/posts" class="btn btn-outline btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">Save Post</button>
            </div>
        </form>
    </main>

    <script>
        const tagInput = document.getElementById('tagInput');
        const tagDropdown = document.getElementById('tagDropdown');

        function toggleDropdown() {
            tagDropdown.classList.toggle('hidden');
        }

        // Update input placeholder with selected tags
        const checkboxes = tagDropdown.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const selected = Array.from(checkboxes)
                    .filter(chk => chk.checked)
                    .map(chk => chk.value)
                    .join(', ');
                tagInput.value = selected;
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!tagDropdown.contains(e.target) && e.target !== tagInput) {
                tagDropdown.classList.add('hidden');
            }
        });
    </script>

</body>
</html>
{{ end }}
